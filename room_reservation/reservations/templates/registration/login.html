{% extends 'reservations/base.html' %}

{% block title %}Login{% endblock %}

{% block content %}
<h1>Welcome to Te Whare Runanga!</h1>

<form method="post" autocomplete="off" novalidate>
    {% csrf_token %}
    
    {% if form.non_field_errors and request.method == 'POST' %}
    <div class="error-message" style="color: #dc3545; margin-bottom: 15px; padding: 10px; background-color: #f8d7da; border: 1px solid #f5c6cb; border-radius: 4px;">
        {% for error in form.non_field_errors %}
            {{ error }}
        {% endfor %}
    </div>
    {% endif %}
    
    <table>
        {% for field in form %}
        <tr>
            <td>{{ field.label_tag }}</td>
            <td>
                <input type="{{ field.field.widget.input_type }}" 
                       name="{{ field.name }}" 
                       id="{{ field.id_for_label }}"
                       class="form-control"
                       {% if field.name == 'username' or field.name == 'password' %}value=""{% endif %}
                       autocomplete="off"
                       style="width: 100%; 
                              max-width: 350px; 
                              padding: 12px; 
                              font-size: 1.1em;
                              border: 1px solid #ddd; 
                              border-radius: 4px;
                              box-sizing: border-box;">
                
                {% if field.help_text %}
                <div class="helptext" style="font-size: 0.8em; color: #6c757d; margin-top: 4px;">
                    {{ field.help_text }}
                </div>
                {% endif %}
                
                {% if field.errors %}
                <div class="error" style="color: #dc3545; font-size: 0.9em; margin-top: 4px;">
                    {{ field.errors|join:", " }}
                </div>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
    
    <div style="margin-top: 15px;">
        <button type="submit" style="padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Login
        </button>
    </div>
    <div style="margin-top: 15px;">
        Forgot password?
    </div>
</form>
<p>Don't have an account? <a href="{% url 'reservations:register' %}">Register Here!</a></p>
<script>
    window.onload = function() {
        const username = document.querySelector('input[name="username"]');
        const password = document.querySelector('input[name="password"]');
        username.focus();
        username.value = '';
        password.value = '';
    };
</script>
{% endblock %}